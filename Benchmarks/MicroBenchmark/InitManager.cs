//------------------------------------------------------------------------------
// <auto-generated>
// Well, not really. This is just a trick to get StyleCop off my back.
// </auto-generated>
//------------------------------------------------------------------------------
using System.Collections.Generic;
using System.Threading.Tasks;
using Microsoft.Coyote.Actors;

namespace MicroBenchmark;

public class InitManager : Actor
{
    private ManagerSetupEvent ManagerInfo;

    protected override Task OnInitializeAsync(Event initialEvent)
    {
        var setup = initialEvent as ManagerSetupEvent;
        this.ManagerInfo = setup;
        this.SendEvents();
        return Task.CompletedTask;
    }

    private void SendEvents()
    {
        for (int i = 0; i < this.ManagerInfo.Workers.Count; i++)
        {
            this.SendEvent(this.ManagerInfo.Workers[i], new InitEvent(), options: new SendOptions(mustHandle: true));
        }

        this.SendEvent(this.ManagerInfo.Terminator, new InitEvent(), options: new SendOptions(mustHandle: true));
        this.SendEvent(this.ManagerInfo.Client, new InitEvent(), options: new SendOptions(mustHandle: true));
    }
}
